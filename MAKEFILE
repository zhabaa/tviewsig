.PHONY: up down build logs backend watchdog cli

up:
	docker-compose up -d

down:
	docker-compose down

build:
	docker-compose build --no-cache

logs:
	docker-compose logs -f

logs-backend:
	docker-compose logs -f backend

logs-watchdog:
	docker-compose logs -f watchdog

backend:
	docker-compose exec backend bash

watchdog:
	docker-compose exec watchdog bash

clickhouse:
	docker-compose exec clickhouse clickhouse-client

restart:
	docker-compose restart

status:
	docker-compose ps

clean:
	docker-compose down -v

prune:
	docker system prune -f

help:
	@echo "Доступные команды:"
	@echo "  make up           - Запустить проект"
	@echo "  make down         - Остановить проект"
	@echo "  make restart      - Перезапустить"
	@echo "  make build        - Пересобрать образы"
	@echo "  make logs         - Логи всех сервисов"
	@echo "  make logs-backend - Логи backend"
	@echo "  make logs-watchdog - Логи watchdog"
	@echo "  make backend      - Войти в контейнер backend"
	@echo "  make watchdog     - Войти в контейнер watchdog"
	@echo "  make clickhouse   - Клиент ClickHouse"
	@echo "  make status       - Статус контейнеров"
	@echo "  make clean        - Остановить и удалить volumes"
	@echo "  make help         - Эта справка"
